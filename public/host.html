<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Panel host - Chachor Piecze</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <script>
    if (sessionStorage.getItem("isHostLogged") !== "true") {
      window.location.href = "/host-login";
    }
  </script>

  <nav class="navbar">
    <ul class="nav-links">
      <li><a href="/index">Zamów</a></li>
      <li><a href="/accessibility">Dostępność i odbiory</a></li>
      <li><a href="/about">O nas</a></li>
    </ul>
  </nav>

  <header class="hero">
    <h1>Panel Host</h1>
    <p>Dodawaj nowe produkty do sklepu</p>
  </header>

  <section class="host-section">
    <form id="hostForm" enctype="multipart/form-data">
      <input type="text" id="name" placeholder="Nazwa produktu" required>
      <input type="number" id="price" placeholder="Cena" required>
      <input type="text" id="desc" placeholder="Opis produktu" required>
      <select id="categorySelect" required>
        <option value="">-- Wybierz kategorię --</option>
      </select>
      <div class="host-product-availability" id="productAvailabilityPicker">
        <span class="host-product-availability__label">Dni dostępności</span>
        <p class="host-product-availability__hint">Zaznacz dni, w które wypiek będzie dostępny w sklepie.</p>
        <div class="host-product-availability__grid" id="productAvailabilityDays" role="group" aria-label="Dni tygodnia"></div>
        <label class="host-product-availability__toggle host-product-availability__toggle--all">
          <input type="checkbox" id="productAvailabilityAll">
          <span>Codziennie</span>
        </label>
      </div>
      <input type="file" id="image" accept="image/*" required>
      <button type="submit">Dodaj produkt</button>
    </form>
    <div id="hostMessage"></div>
  </section>

  <section id="categoriesSection">
    <h2>Kategorie</h2>
    <form id="categoryForm">
      <input type="text" id="categoryName" placeholder="Nazwa kategorii" required>
      <button type="submit">Dodaj kategorię</button>
    </form>
    <div id="categoryMessage"></div>

    <div id="categoryList"></div>
  </section>

  <section class="host-availability-section">
    <div class="host-availability-header">
      <h2>Dostępność tygodniowa</h2>
      <p>Wpisz wypieki dostępne danego dnia oraz godzinę, od której można je odebrać.</p>
    </div>
    <div id="availabilityManager" class="availability-manager-grid"></div>
    <div id="availabilityMessage" class="availability-message"></div>
  </section>

  <section class="host-discount-section glass-panel">
    <div class="host-discount-header">
      <h2>Kody rabatowe</h2>
      <p>Utwórz kod i przypisz procent rabatu, aby klienci mogli go wykorzystać w koszyku.</p>
    </div>

    <form id="discountForm" class="discount-form">
      <div class="discount-form-row">
        <label class="discount-field" for="discountCode">Kod</label>
        <input type="text" id="discountCode" placeholder="np. SMAK20" maxlength="40" required>
      </div>
      <div class="discount-form-row">
        <label class="discount-field" for="discountPercent">Rabat (%)</label>
        <input type="number" id="discountPercent" min="1" max="100" step="1" placeholder="np. 15" required>
      </div>
      <button type="submit">Dodaj kod</button>
    </form>
    <div id="discountMessage" class="discount-message" aria-live="polite"></div>

    <div id="discountList" class="discount-list"></div>
  </section>

  <section class="host-about-section glass-panel">
    <div class="host-about-header">
      <h2>Sekcja "O nas"</h2>
      <p>Zaktualizuj zdjęcie i tekst, które wyświetlają się na stronie O nas.</p>
    </div>

    <form id="aboutForm" class="host-about-form" enctype="multipart/form-data">
      <label class="about-field">
        <span>Opis</span>
        <textarea id="aboutText" name="aboutText" placeholder="Opowiedz krótko o piekarni" required></textarea>
      </label>
      <label class="about-field">
        <span>Zdjęcie w tle</span>
        <input type="file" id="aboutImage" name="aboutImage" accept="image/*">
      </label>
      <button type="submit">Zapisz sekcję</button>
    </form>

    <div id="aboutMessage" aria-live="polite"></div>

    <div class="host-about-preview" id="aboutPreview">
      <figure>
        <img id="aboutPreviewImage" alt="Podgląd zdjęcia sekcji O nas" hidden>
        <span id="aboutNoImagePlaceholder">Brak zdjęcia — dodaj plik, by zaktualizować sekcję.</span>
      </figure>
      <p class="host-about-preview__text" id="aboutPreviewText"></p>
    </div>
  </section>

  <section id="products" class="products-section">
  <h2>Dostępne wypieki</h2>
  <div id="productGrid" class="product-grid"></div>
  </section>

  <script src="host.js"></script>
</body>
</html>
